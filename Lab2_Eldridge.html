<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Lab 2 - Eldridge</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="Lab2_Eldridge_files/libs/clipboard/clipboard.min.js"></script>
<script src="Lab2_Eldridge_files/libs/quarto-html/quarto.js"></script>
<script src="Lab2_Eldridge_files/libs/quarto-html/popper.min.js"></script>
<script src="Lab2_Eldridge_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Lab2_Eldridge_files/libs/quarto-html/anchor.min.js"></script>
<link href="Lab2_Eldridge_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Lab2_Eldridge_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Lab2_Eldridge_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Lab2_Eldridge_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Lab2_Eldridge_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lab 2 - Eldridge</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div id="cell-1" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotnine <span class="im">as</span> p9</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">'avocado-updated-2020.csv'</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>df.head()</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>df.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 33045 entries, 0 to 33044
Data columns (total 13 columns):
 #   Column         Non-Null Count  Dtype  
---  ------         --------------  -----  
 0   date           33045 non-null  object 
 1   average_price  33045 non-null  float64
 2   total_volume   33045 non-null  float64
 3   4046           33045 non-null  float64
 4   4225           33045 non-null  float64
 5   4770           33045 non-null  float64
 6   total_bags     33045 non-null  float64
 7   small_bags     33045 non-null  float64
 8   large_bags     33045 non-null  float64
 9   xlarge_bags    33045 non-null  float64
 10  type           33045 non-null  object 
 11  year           33045 non-null  int64  
 12  geography      33045 non-null  object 
dtypes: float64(9), int64(1), object(3)
memory usage: 3.3+ MB</code></pre>
</div>
</div>
<div id="cell-3" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> classify_region(geo):</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> geo <span class="op">==</span> <span class="st">"Total U.S."</span>:</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'National'</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> geo <span class="kw">in</span> [<span class="st">"West"</span>, <span class="st">"Northeast"</span>, <span class="st">"South Central"</span>, <span class="st">"Southeast"</span>, <span class="st">"Great Lakes"</span>, <span class="st">"Plains"</span>, <span class="st">"California"</span>, <span class="st">"Midsouth"</span>]:</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'Regional'</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> geo <span class="kw">in</span> [<span class="st">"California"</span>, <span class="st">"Texas"</span>, <span class="st">"New York"</span>, <span class="st">"Florida"</span>, <span class="st">"South Carolina"</span>, <span class="st">"Washington"</span>]:  </span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'State'</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'Metro'</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'region_type'</span>] <span class="op">=</span> df[<span class="st">'geography'</span>].<span class="bu">apply</span>(classify_region)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>df.rename(columns<span class="op">=</span>{</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">'4046'</span>: <span class="st">'small_hass_bags'</span>,</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">'4225'</span>: <span class="st">'large_hass_bags'</span>,</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">'4770'</span>: <span class="st">'xlarge_hass_bags'</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>distinct_regions <span class="op">=</span> df[<span class="st">'geography'</span>].nunique()</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"There are </span><span class="sc">{</span>distinct_regions<span class="sc">}</span><span class="ss"> distinct geographical regions."</span>)</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df[[<span class="st">'geography'</span>, <span class="st">'region_type'</span>]].drop_duplicates())</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>df.to_csv(<span class="st">'clean_avocado.csv'</span>, index<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>There are 54 distinct geographical regions.
                geography region_type
0                  Albany       Metro
2                 Atlanta       Metro
4    Baltimore/Washington       Metro
6                   Boise       Metro
8                  Boston       Metro
10      Buffalo/Rochester       Metro
12             California    Regional
14              Charlotte       Metro
16                Chicago       Metro
18      Cincinnati/Dayton       Metro
20               Columbus       Metro
22       Dallas/Ft. Worth       Metro
24                 Denver       Metro
26                Detroit       Metro
28           Grand Rapids       Metro
30            Great Lakes    Regional
32    Harrisburg/Scranton       Metro
34   Hartford/Springfield       Metro
36                Houston       Metro
38           Indianapolis       Metro
40           Jacksonville       Metro
42              Las Vegas       Metro
44            Los Angeles       Metro
46             Louisville       Metro
48   Miami/Ft. Lauderdale       Metro
50               Midsouth    Regional
52              Nashville       Metro
54     New Orleans/Mobile       Metro
56               New York       State
58              Northeast    Regional
60   Northern New England       Metro
62                Orlando       Metro
64           Philadelphia       Metro
66         Phoenix/Tucson       Metro
68             Pittsburgh       Metro
70                 Plains    Regional
72               Portland       Metro
74     Raleigh/Greensboro       Metro
76       Richmond/Norfolk       Metro
78                Roanoke       Metro
80             Sacramento       Metro
82              San Diego       Metro
84          San Francisco       Metro
86                Seattle       Metro
88         South Carolina       State
90          South Central    Regional
92              Southeast    Regional
94                Spokane       Metro
96              St. Louis       Metro
98               Syracuse       Metro
100                 Tampa       Metro
102            Total U.S.    National
104                  West    Regional
106   West Tex/New Mexico       Metro</code></pre>
</div>
</div>
<div id="cell-4" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>clean_avo <span class="op">=</span> pd.read_csv(<span class="st">'clean_avocado.csv'</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>(clean_avo))</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>clean_avo</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>33045</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">date</th>
<th data-quarto-table-cell-role="th">average_price</th>
<th data-quarto-table-cell-role="th">total_volume</th>
<th data-quarto-table-cell-role="th">small_hass_bags</th>
<th data-quarto-table-cell-role="th">large_hass_bags</th>
<th data-quarto-table-cell-role="th">xlarge_hass_bags</th>
<th data-quarto-table-cell-role="th">total_bags</th>
<th data-quarto-table-cell-role="th">small_bags</th>
<th data-quarto-table-cell-role="th">large_bags</th>
<th data-quarto-table-cell-role="th">xlarge_bags</th>
<th data-quarto-table-cell-role="th">type</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">geography</th>
<th data-quarto-table-cell-role="th">region_type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2015-01-04</td>
<td>1.22</td>
<td>40873.28</td>
<td>2819.50</td>
<td>28287.42</td>
<td>49.90</td>
<td>9716.46</td>
<td>9186.93</td>
<td>529.53</td>
<td>0.00</td>
<td>conventional</td>
<td>2015</td>
<td>Albany</td>
<td>Metro</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2015-01-04</td>
<td>1.79</td>
<td>1373.95</td>
<td>57.42</td>
<td>153.88</td>
<td>0.00</td>
<td>1162.65</td>
<td>1162.65</td>
<td>0.00</td>
<td>0.00</td>
<td>organic</td>
<td>2015</td>
<td>Albany</td>
<td>Metro</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2015-01-04</td>
<td>1.00</td>
<td>435021.49</td>
<td>364302.39</td>
<td>23821.16</td>
<td>82.15</td>
<td>46815.79</td>
<td>16707.15</td>
<td>30108.64</td>
<td>0.00</td>
<td>conventional</td>
<td>2015</td>
<td>Atlanta</td>
<td>Metro</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2015-01-04</td>
<td>1.76</td>
<td>3846.69</td>
<td>1500.15</td>
<td>938.35</td>
<td>0.00</td>
<td>1408.19</td>
<td>1071.35</td>
<td>336.84</td>
<td>0.00</td>
<td>organic</td>
<td>2015</td>
<td>Atlanta</td>
<td>Metro</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2015-01-04</td>
<td>1.08</td>
<td>788025.06</td>
<td>53987.31</td>
<td>552906.04</td>
<td>39995.03</td>
<td>141136.68</td>
<td>137146.07</td>
<td>3990.61</td>
<td>0.00</td>
<td>conventional</td>
<td>2015</td>
<td>Baltimore/Washington</td>
<td>Metro</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">33040</td>
<td>2020-11-29</td>
<td>1.47</td>
<td>1583056.27</td>
<td>67544.48</td>
<td>97996.46</td>
<td>2617.17</td>
<td>1414878.10</td>
<td>906711.52</td>
<td>480191.83</td>
<td>27974.75</td>
<td>organic</td>
<td>2020</td>
<td>Total U.S.</td>
<td>National</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">33041</td>
<td>2020-11-29</td>
<td>0.91</td>
<td>5811114.22</td>
<td>1352877.53</td>
<td>589061.83</td>
<td>19741.90</td>
<td>3790665.29</td>
<td>2197611.02</td>
<td>1531530.14</td>
<td>61524.13</td>
<td>conventional</td>
<td>2020</td>
<td>West</td>
<td>Regional</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">33042</td>
<td>2020-11-29</td>
<td>1.48</td>
<td>289961.27</td>
<td>13273.75</td>
<td>19341.09</td>
<td>636.51</td>
<td>256709.92</td>
<td>122606.21</td>
<td>134103.71</td>
<td>0.00</td>
<td>organic</td>
<td>2020</td>
<td>West</td>
<td>Regional</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">33043</td>
<td>2020-11-29</td>
<td>0.67</td>
<td>822818.75</td>
<td>234688.01</td>
<td>80205.15</td>
<td>10543.63</td>
<td>497381.96</td>
<td>285764.11</td>
<td>210808.02</td>
<td>809.83</td>
<td>conventional</td>
<td>2020</td>
<td>West Tex/New Mexico</td>
<td>Metro</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">33044</td>
<td>2020-11-29</td>
<td>1.35</td>
<td>24106.58</td>
<td>1236.96</td>
<td>617.80</td>
<td>1564.98</td>
<td>20686.84</td>
<td>17824.52</td>
<td>2862.32</td>
<td>0.00</td>
<td>organic</td>
<td>2020</td>
<td>West Tex/New Mexico</td>
<td>Metro</td>
</tr>
</tbody>
</table>

<p>33045 rows × 14 columns</p>
</div>
</div>
</div>
<div id="cell-5" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#3. Which major geographical region sold the most total organic, small Hass avocados in 2017?</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>organic2017 <span class="op">=</span> clean_avo[(clean_avo[<span class="st">'year'</span>] <span class="op">==</span> <span class="dv">2017</span>) <span class="op">&amp;</span> (clean_avo[<span class="st">'type'</span>] <span class="op">==</span> <span class="st">'organic'</span>) <span class="op">&amp;</span> (clean_avo[<span class="st">'geography'</span>] <span class="op">!=</span> <span class="st">'Total U.S.'</span>)]</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>region_sales <span class="op">=</span> organic2017.groupby(<span class="st">'geography'</span>)[<span class="st">'small_hass_bags'</span>].<span class="bu">sum</span>().reset_index()</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>most_sales_region <span class="op">=</span> region_sales.loc[region_sales[<span class="st">'small_hass_bags'</span>].idxmax()]</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"The region with the most total organic small Hass avocados sold in 2017 is: </span><span class="sc">{</span>most_sales_region[<span class="st">'geography'</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Total small Hass bags sold: </span><span class="sc">{</span>most_sales_region[<span class="st">'small_hass_bags'</span>]<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The region with the most total organic small Hass avocados sold in 2017 is: West
Total small Hass bags sold: 1870206.29</code></pre>
</div>
</div>
<div id="cell-6" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>clean_avo[<span class="st">'date'</span>] <span class="op">=</span> pd.to_datetime(clean_avo[<span class="st">'date'</span>])</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>clean_avo[<span class="st">'month'</span>] <span class="op">=</span> clean_avo[<span class="st">'date'</span>].dt.month</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>clean_avo[<span class="st">'day'</span>] <span class="op">=</span> clean_avo[<span class="st">'date'</span>].dt.day</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>clean_avo[<span class="st">'year'</span>] <span class="op">=</span> clean_avo[<span class="st">'date'</span>].dt.year</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>monthly_avg_volume <span class="op">=</span> clean_avo.groupby(<span class="st">'month'</span>)[<span class="st">'total_volume'</span>].mean().reset_index()</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>highest_avg_volume_month <span class="op">=</span> monthly_avg_volume.loc[monthly_avg_volume[<span class="st">'total_volume'</span>].idxmax()]</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>month_names <span class="op">=</span> {<span class="dv">1</span>: <span class="st">'January'</span>, <span class="dv">2</span>: <span class="st">'February'</span>, <span class="dv">3</span>: <span class="st">'March'</span>, <span class="dv">4</span>: <span class="st">'April'</span>, <span class="dv">5</span>: <span class="st">'May'</span>, <span class="dv">6</span>: <span class="st">'June'</span>,</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>               <span class="dv">7</span>: <span class="st">'July'</span>, <span class="dv">8</span>: <span class="st">'August'</span>, <span class="dv">9</span>: <span class="st">'September'</span>, <span class="dv">10</span>: <span class="st">'October'</span>, <span class="dv">11</span>: <span class="st">'November'</span>, <span class="dv">12</span>: <span class="st">'December'</span>}</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>highest_month_name <span class="op">=</span> month_names[highest_avg_volume_month[<span class="st">'month'</span>]]</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"The month with the highest average volume of avocado sales is: </span><span class="sc">{</span>highest_month_name<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The month with the highest average volume of avocado sales is: May</code></pre>
</div>
</div>
<div id="cell-7" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#5. Which metro area geographical regions sold the most total avocados? Plot side-by-side box-plots of the total volume for only the five metro geographical regions with the highest averages for the total_volume variable.</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> ggplot, aes, geom_boxplot, labs, theme, element_text</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>only_metro <span class="op">=</span> clean_avo[clean_avo[<span class="st">'region_type'</span>] <span class="op">==</span> <span class="st">'Metro'</span>]</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>metro_area <span class="op">=</span> only_metro.groupby(<span class="st">'geography'</span>)[<span class="st">'total_volume'</span>].<span class="bu">sum</span>().reset_index()</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>top_5_metro <span class="op">=</span> metro_area.sort_values(by<span class="op">=</span><span class="st">'total_volume'</span>, ascending<span class="op">=</span><span class="va">False</span>).head(<span class="dv">5</span>)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>top_5_names <span class="op">=</span> top_5_metro[<span class="st">'geography'</span>].tolist()</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>top_5_data <span class="op">=</span> only_metro[only_metro[<span class="st">'geography'</span>].isin(top_5_names)]</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>metro_most <span class="op">=</span> (</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>    ggplot(top_5_data, aes(x<span class="op">=</span><span class="st">'geography'</span>, y<span class="op">=</span><span class="st">'total_volume'</span>)) <span class="op">+</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>    geom_boxplot() <span class="op">+</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>    labs(</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">'Box Plots of Total Volume for Top 5 Metro Areas with Highest Averages'</span>,</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">'Metro Area'</span>,</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="st">'Total Volume'</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>    ) <span class="op">+</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>    theme(axis_text_x<span class="op">=</span>element_text(rotation<span class="op">=</span><span class="dv">45</span>, ha<span class="op">=</span><span class="st">'right'</span>))</span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(metro_most)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/jb/g1z659_j7g7g3c677k1x2bsc0000gn/T/ipykernel_1528/1401883970.py:26: FutureWarning: Using print(plot) to draw and show the plot figure is deprecated and will be removed in a future version. Use plot.show().</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Lab2_Eldridge_files/figure-html/cell-7-output-2.png" width="230" height="172" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code></code></pre>
</div>
</div>
<div id="cell-8" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#6. From your cleaned data set, create a data set with only these California regions and answer the following questions about these California regions only.</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>california_regions <span class="op">=</span> [<span class="st">"Los Angeles"</span>, <span class="st">"San Diego"</span>, <span class="st">"Sacramento"</span>, <span class="st">"San Francisco"</span>]</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>california_data <span class="op">=</span> clean_avo[clean_avo[<span class="st">'geography'</span>].isin(california_regions)]</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>california_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">date</th>
<th data-quarto-table-cell-role="th">average_price</th>
<th data-quarto-table-cell-role="th">total_volume</th>
<th data-quarto-table-cell-role="th">small_hass_bags</th>
<th data-quarto-table-cell-role="th">large_hass_bags</th>
<th data-quarto-table-cell-role="th">xlarge_hass_bags</th>
<th data-quarto-table-cell-role="th">total_bags</th>
<th data-quarto-table-cell-role="th">small_bags</th>
<th data-quarto-table-cell-role="th">large_bags</th>
<th data-quarto-table-cell-role="th">xlarge_bags</th>
<th data-quarto-table-cell-role="th">type</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">geography</th>
<th data-quarto-table-cell-role="th">region_type</th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">day</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">44</td>
<td>2015-01-04</td>
<td>0.85</td>
<td>2682159.95</td>
<td>1837999.65</td>
<td>524430.47</td>
<td>64225.78</td>
<td>255504.05</td>
<td>215571.80</td>
<td>36981.72</td>
<td>2950.53</td>
<td>conventional</td>
<td>2015</td>
<td>Los Angeles</td>
<td>Metro</td>
<td>1</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">45</td>
<td>2015-01-04</td>
<td>1.25</td>
<td>54495.54</td>
<td>47721.51</td>
<td>1723.40</td>
<td>0.00</td>
<td>5050.63</td>
<td>5050.63</td>
<td>0.00</td>
<td>0.00</td>
<td>organic</td>
<td>2015</td>
<td>Los Angeles</td>
<td>Metro</td>
<td>1</td>
<td>4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">80</td>
<td>2015-01-04</td>
<td>1.05</td>
<td>430138.88</td>
<td>110693.69</td>
<td>270107.61</td>
<td>9737.50</td>
<td>39600.08</td>
<td>39600.08</td>
<td>0.00</td>
<td>0.00</td>
<td>conventional</td>
<td>2015</td>
<td>Sacramento</td>
<td>Metro</td>
<td>1</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">81</td>
<td>2015-01-04</td>
<td>1.33</td>
<td>9213.49</td>
<td>3727.52</td>
<td>4327.52</td>
<td>0.00</td>
<td>1158.45</td>
<td>1158.45</td>
<td>0.00</td>
<td>0.00</td>
<td>organic</td>
<td>2015</td>
<td>Sacramento</td>
<td>Metro</td>
<td>1</td>
<td>4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">82</td>
<td>2015-01-04</td>
<td>0.94</td>
<td>461607.33</td>
<td>244152.26</td>
<td>165299.33</td>
<td>15302.75</td>
<td>36852.99</td>
<td>30884.29</td>
<td>5595.00</td>
<td>373.70</td>
<td>conventional</td>
<td>2015</td>
<td>San Diego</td>
<td>Metro</td>
<td>1</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">33018</td>
<td>2020-11-29</td>
<td>1.43</td>
<td>23531.38</td>
<td>3303.69</td>
<td>2057.03</td>
<td>0.00</td>
<td>18170.66</td>
<td>18144.54</td>
<td>26.12</td>
<td>0.00</td>
<td>organic</td>
<td>2020</td>
<td>Sacramento</td>
<td>Metro</td>
<td>11</td>
<td>29</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">33019</td>
<td>2020-11-29</td>
<td>1.12</td>
<td>469356.72</td>
<td>104509.99</td>
<td>19988.45</td>
<td>7210.47</td>
<td>337647.81</td>
<td>189341.36</td>
<td>127701.64</td>
<td>20604.81</td>
<td>conventional</td>
<td>2020</td>
<td>San Diego</td>
<td>Metro</td>
<td>11</td>
<td>29</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">33020</td>
<td>2020-11-29</td>
<td>1.95</td>
<td>25799.95</td>
<td>894.63</td>
<td>838.11</td>
<td>0.00</td>
<td>24067.21</td>
<td>9691.46</td>
<td>14375.75</td>
<td>0.00</td>
<td>organic</td>
<td>2020</td>
<td>San Diego</td>
<td>Metro</td>
<td>11</td>
<td>29</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">33021</td>
<td>2020-11-29</td>
<td>1.50</td>
<td>644141.37</td>
<td>128555.43</td>
<td>136718.24</td>
<td>5597.21</td>
<td>373270.49</td>
<td>159276.65</td>
<td>207760.32</td>
<td>6233.52</td>
<td>conventional</td>
<td>2020</td>
<td>San Francisco</td>
<td>Metro</td>
<td>11</td>
<td>29</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">33022</td>
<td>2020-11-29</td>
<td>1.87</td>
<td>59527.02</td>
<td>2815.23</td>
<td>4542.30</td>
<td>0.00</td>
<td>52169.49</td>
<td>52034.33</td>
<td>135.16</td>
<td>0.00</td>
<td>organic</td>
<td>2020</td>
<td>San Francisco</td>
<td>Metro</td>
<td>11</td>
<td>29</td>
</tr>
</tbody>
</table>

<p>2448 rows × 16 columns</p>
</div>
</div>
</div>
<div id="cell-9" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#7. In which California regions is the price of organic versus conventional avocados most different? Support your answer with a few summary statistics AND a visualization.</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>price_difference <span class="op">=</span> (</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    california_data.groupby([<span class="st">'geography'</span>, <span class="st">'type'</span>])[<span class="st">'average_price'</span>]</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    .mean()</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    .unstack()</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>price_difference[<span class="st">'price_diff'</span>] <span class="op">=</span> price_difference[<span class="st">'organic'</span>] <span class="op">-</span> price_difference[<span class="st">'conventional'</span>]</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>price_difference</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>price_dif_plot <span class="op">=</span> (</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    ggplot(california_data, aes(x<span class="op">=</span><span class="st">'geography'</span>, y<span class="op">=</span><span class="st">'average_price'</span>, fill<span class="op">=</span><span class="st">'type'</span>)) <span class="op">+</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>    geom_boxplot() <span class="op">+</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>    labs(</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">'Price Difference Between Organic and Conventional Avocados in California Regions'</span>,</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">'California Region'</span>,</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="st">'Average Price'</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>    ) <span class="op">+</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>    theme(axis_text_x<span class="op">=</span>element_text(rotation<span class="op">=</span><span class="dv">45</span>, ha<span class="op">=</span><span class="st">'right'</span>))</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(price_dif_plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/jb/g1z659_j7g7g3c677k1x2bsc0000gn/T/ipykernel_1528/913425488.py:24: FutureWarning: Using print(plot) to draw and show the plot figure is deprecated and will be removed in a future version. Use plot.show().</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Lab2_Eldridge_files/figure-html/cell-9-output-2.png" width="640" height="480" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code></code></pre>
</div>
</div>
<div id="cell-10" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">#8. Recreate the plot; you do not have to replicate the exact finishing touches - e.g., color, theme - but your plot should resemble the content of this plot.</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> ggplot, aes, geom_bar, facet_wrap, labs, theme, element_text, position_fill</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co">#ChatGPT - Melt the DataFrame to convert size columns into rows for easy plotting</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>california_melted <span class="op">=</span> pd.melt(</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    california_data,</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>    id_vars<span class="op">=</span>[<span class="st">'geography'</span>, <span class="st">'type'</span>],</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    value_vars<span class="op">=</span>[<span class="st">'xlarge_hass_bags'</span>, <span class="st">'large_hass_bags'</span>, <span class="st">'small_hass_bags'</span>],</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    var_name<span class="op">=</span><span class="st">'size'</span>,</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>    value_name<span class="op">=</span><span class="st">'volume'</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>california_melted[<span class="st">'size'</span>] <span class="op">=</span> california_melted[<span class="st">'size'</span>].replace({</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">'xlarge_hass_bags'</span>: <span class="st">'Xlarge'</span>,</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">'large_hass_bags'</span>: <span class="st">'Large'</span>,</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">'small_hass_bags'</span>: <span class="st">'Small'</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a><span class="co">#ChatGPT - Helped with colors/asethetics</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>plot <span class="op">=</span> (</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>    ggplot(california_melted, aes(x<span class="op">=</span><span class="st">'geography'</span>, y<span class="op">=</span><span class="st">'volume'</span>, fill<span class="op">=</span><span class="st">'size'</span>)) <span class="op">+</span></span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>    geom_bar(stat<span class="op">=</span><span class="st">'identity'</span>, position<span class="op">=</span>position_fill()) <span class="op">+</span></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>    facet_wrap(<span class="st">'~type'</span>, scales<span class="op">=</span><span class="st">'free_x'</span>) <span class="op">+</span></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>    labs(</span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">'Proportion of Average Hass Avocado Sales by Size'</span>,</span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">'Region of California'</span>,</span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="st">'Proportion'</span></span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>    ) <span class="op">+</span></span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a>    theme(</span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a>        axis_text_x<span class="op">=</span>element_text(rotation<span class="op">=</span><span class="dv">45</span>, ha<span class="op">=</span><span class="st">'right'</span>)</span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/jb/g1z659_j7g7g3c677k1x2bsc0000gn/T/ipykernel_1528/3263463930.py:36: FutureWarning: Using print(plot) to draw and show the plot figure is deprecated and will be removed in a future version. Use plot.show().</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Lab2_Eldridge_files/figure-html/cell-10-output-2.png" width="640" height="480" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code></code></pre>
</div>
</div>
<div id="cell-11" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>new_df <span class="op">=</span> pd.read_csv(<span class="st">'Lab2CreateData.csv'</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>joined_data <span class="op">=</span> pd.merge(california_data, new_df, on<span class="op">=</span><span class="st">'geography'</span>, how<span class="op">=</span><span class="st">'inner'</span>)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>joined_data.rename(columns<span class="op">=</span>{<span class="st">'year_x'</span>: <span class="st">'year'</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>joined_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">date</th>
<th data-quarto-table-cell-role="th">average_price</th>
<th data-quarto-table-cell-role="th">total_volume</th>
<th data-quarto-table-cell-role="th">small_hass_bags</th>
<th data-quarto-table-cell-role="th">large_hass_bags</th>
<th data-quarto-table-cell-role="th">xlarge_hass_bags</th>
<th data-quarto-table-cell-role="th">total_bags</th>
<th data-quarto-table-cell-role="th">small_bags</th>
<th data-quarto-table-cell-role="th">large_bags</th>
<th data-quarto-table-cell-role="th">xlarge_bags</th>
<th data-quarto-table-cell-role="th">type</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">geography</th>
<th data-quarto-table-cell-role="th">region_type</th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">day</th>
<th data-quarto-table-cell-role="th">year_y</th>
<th data-quarto-table-cell-role="th">avg_house_price</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2015-01-04</td>
<td>0.85</td>
<td>2682159.95</td>
<td>1837999.65</td>
<td>524430.47</td>
<td>64225.78</td>
<td>255504.05</td>
<td>215571.80</td>
<td>36981.72</td>
<td>2950.53</td>
<td>conventional</td>
<td>2015</td>
<td>Los Angeles</td>
<td>Metro</td>
<td>1</td>
<td>4</td>
<td>2015</td>
<td>800,000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2015-01-04</td>
<td>0.85</td>
<td>2682159.95</td>
<td>1837999.65</td>
<td>524430.47</td>
<td>64225.78</td>
<td>255504.05</td>
<td>215571.80</td>
<td>36981.72</td>
<td>2950.53</td>
<td>conventional</td>
<td>2015</td>
<td>Los Angeles</td>
<td>Metro</td>
<td>1</td>
<td>4</td>
<td>2016</td>
<td>820,000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2015-01-04</td>
<td>0.85</td>
<td>2682159.95</td>
<td>1837999.65</td>
<td>524430.47</td>
<td>64225.78</td>
<td>255504.05</td>
<td>215571.80</td>
<td>36981.72</td>
<td>2950.53</td>
<td>conventional</td>
<td>2015</td>
<td>Los Angeles</td>
<td>Metro</td>
<td>1</td>
<td>4</td>
<td>2017</td>
<td>833,000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2015-01-04</td>
<td>0.85</td>
<td>2682159.95</td>
<td>1837999.65</td>
<td>524430.47</td>
<td>64225.78</td>
<td>255504.05</td>
<td>215571.80</td>
<td>36981.72</td>
<td>2950.53</td>
<td>conventional</td>
<td>2015</td>
<td>Los Angeles</td>
<td>Metro</td>
<td>1</td>
<td>4</td>
<td>2018</td>
<td>850,000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2015-01-04</td>
<td>0.85</td>
<td>2682159.95</td>
<td>1837999.65</td>
<td>524430.47</td>
<td>64225.78</td>
<td>255504.05</td>
<td>215571.80</td>
<td>36981.72</td>
<td>2950.53</td>
<td>conventional</td>
<td>2015</td>
<td>Los Angeles</td>
<td>Metro</td>
<td>1</td>
<td>4</td>
<td>2019</td>
<td>870,000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14683</td>
<td>2020-11-29</td>
<td>1.87</td>
<td>59527.02</td>
<td>2815.23</td>
<td>4542.30</td>
<td>0.00</td>
<td>52169.49</td>
<td>52034.33</td>
<td>135.16</td>
<td>0.00</td>
<td>organic</td>
<td>2020</td>
<td>San Francisco</td>
<td>Metro</td>
<td>11</td>
<td>29</td>
<td>2016</td>
<td>1,530,000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">14684</td>
<td>2020-11-29</td>
<td>1.87</td>
<td>59527.02</td>
<td>2815.23</td>
<td>4542.30</td>
<td>0.00</td>
<td>52169.49</td>
<td>52034.33</td>
<td>135.16</td>
<td>0.00</td>
<td>organic</td>
<td>2020</td>
<td>San Francisco</td>
<td>Metro</td>
<td>11</td>
<td>29</td>
<td>2017</td>
<td>1,555,000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14685</td>
<td>2020-11-29</td>
<td>1.87</td>
<td>59527.02</td>
<td>2815.23</td>
<td>4542.30</td>
<td>0.00</td>
<td>52169.49</td>
<td>52034.33</td>
<td>135.16</td>
<td>0.00</td>
<td>organic</td>
<td>2020</td>
<td>San Francisco</td>
<td>Metro</td>
<td>11</td>
<td>29</td>
<td>2018</td>
<td>1,575,000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">14686</td>
<td>2020-11-29</td>
<td>1.87</td>
<td>59527.02</td>
<td>2815.23</td>
<td>4542.30</td>
<td>0.00</td>
<td>52169.49</td>
<td>52034.33</td>
<td>135.16</td>
<td>0.00</td>
<td>organic</td>
<td>2020</td>
<td>San Francisco</td>
<td>Metro</td>
<td>11</td>
<td>29</td>
<td>2019</td>
<td>1,625,000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14687</td>
<td>2020-11-29</td>
<td>1.87</td>
<td>59527.02</td>
<td>2815.23</td>
<td>4542.30</td>
<td>0.00</td>
<td>52169.49</td>
<td>52034.33</td>
<td>135.16</td>
<td>0.00</td>
<td>organic</td>
<td>2020</td>
<td>San Francisco</td>
<td>Metro</td>
<td>11</td>
<td>29</td>
<td>2020</td>
<td>1,650,000</td>
</tr>
</tbody>
</table>

<p>14688 rows × 18 columns</p>
</div>
</div>
</div>
<div id="cell-12" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> ggplot, aes, geom_point, geom_smooth, labs, theme</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>price_plot <span class="op">=</span> (</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    ggplot(joined_data, aes(x<span class="op">=</span><span class="st">'avg_house_price'</span>, y<span class="op">=</span><span class="st">'average_price'</span>, color<span class="op">=</span><span class="st">'type'</span>)) <span class="op">+</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    geom_point(size<span class="op">=</span><span class="dv">3</span>) <span class="op">+</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    geom_smooth(method<span class="op">=</span><span class="st">'lm'</span>, se<span class="op">=</span><span class="va">False</span>) <span class="op">+</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    labs(</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">'Relationship Between House Prices and Avocado Prices'</span>,</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">'Average House Price (USD)'</span>,</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="st">'Average Avocado Price (USD)'</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    ) <span class="op">+</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>    theme(axis_text_x<span class="op">=</span>element_text(rotation<span class="op">=</span><span class="dv">45</span>, ha<span class="op">=</span><span class="st">'right'</span>))</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(price_plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/jb/g1z659_j7g7g3c677k1x2bsc0000gn/T/ipykernel_1528/1280855276.py:15: FutureWarning: Using print(plot) to draw and show the plot figure is deprecated and will be removed in a future version. Use plot.show().
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.
/Users/evaneldridge/opt/anaconda3/lib/python3.9/site-packages/plotnine/stats/stat_smooth.py:215: PlotnineWarning: Smoothing requires 2 or more points. Got 1. Not enough points for smoothing. If this message a surprise, make sure the column mapped to the x aesthetic has the right dtype.</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Lab2_Eldridge_files/figure-html/cell-12-output-2.png" width="640" height="480" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code></code></pre>
</div>
</div>
<p>From the plot, we can see that there is no significant correlation between house prices and avocado prices in California regions from 2015 to 2020. Both organic and conventional avocado prices remain relatively the same across different house price levels, with organic avocados consistently priced higher than conventional ones. This suggests that avocado pricing is not strongly correlated with the housing market, such as regional demand, though furhter analysis would be needed to state that confidently. The plot effectively shows that house prices do not appear to drive changes in avocado prices.</p>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>